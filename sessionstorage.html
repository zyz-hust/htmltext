<html>
<body>
    <h1>简单web留言本</h1>
    <textarea id="memo" cols="60" rows="6">
    </textarea><br />
    <input type="button" value="新增留言" onclick="saveStorage('memo');"/>
    <input type="button" value="清空数据" onclick="clearStorage();" />
    <input type="button" value="清空最后一个数据" onclick="clearsingleStorage();" />
    <hr />
    <p id="msg"></p>
    <script type="text/javascript">
        function saveStorage(id){
            var data=document.getElementById(id).value;
            var time=new Date().toUTCString();
            sessionStorage.setItem(time,data);
            showMsg('msg');
        }
        function showMsg(id){
            var result = '<table border="1">';
            for (var i = 0;i<sessionStorage.length;i++){
                var key = sessionStorage.key(i);
                var value = sessionStorage.getItem(key);
                result +='<tr><td>' + value + '</td><td>' + key + '</td></tr>'; 
            }
            result +='</table>';
            var target = document.getElementById(id);
            target.innerHTML=result;
        }

        showMsg('msg')
        function clearStorage() {
        sessionStorage.clear();
        showMsg('msg');
        }
        function clearsingleStorage() {
        sessionStorage.removeItem(sessionStorage.key(sessionStorage.length - 1));
    
        showMsg('msg');
        }
    </script>
</body>
</html>
